<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>group-expenses documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">group-expenses documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">




<ol class="breadcrumb">
  <li>Components</li>
  <li
  >
  TransactionCreatePage</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
        <li >
            <a href="#templateData" role="tab" id="templateData-tab" data-toggle="tab" data-link="template">Template</a>
        </li>
        <li >
            <a href="#styleData" role="tab" id="styleData-tab" data-toggle="tab" data-link="style">Styles</a>
        </li>
        <li >
            <a href="#tree" role="tab" id="tree-tab" data-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/transaction/transaction-create/transaction-create.page.ts</code>
</p>




    <p class="comment">
        <h3>Implements</h3>
    </p>
    <p class="comment">
                    <code><a href="https://angular.io/api/core/OnInit" target="_blank" >OnInit</a></code>
    </p>


<section>
    <h3>Metadata</h3>
    <table class="table table-sm table-hover">
        <tbody>











            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-transaction-create</code></td>
            </tr>

            <tr>
                <td class="col-md-3">styleUrls</td>
                <td class="col-md-9"><code>./transaction-create.page.scss</code></td>
            </tr>



            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>./transaction-create.page.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#currentDate" >currentDate</a>
                            </li>
                            <li>
                                <a href="#currentUser" >currentUser</a>
                            </li>
                            <li>
                                <a href="#errors" >errors</a>
                            </li>
                            <li>
                                <a href="#fairlyDistributedPrice" >fairlyDistributedPrice</a>
                            </li>
                            <li>
                                <a href="#fromGroup" >fromGroup</a>
                            </li>
                            <li>
                                <a href="#groups" >groups</a>
                            </li>
                            <li>
                                <a href="#maxDate" >maxDate</a>
                            </li>
                            <li>
                                <a href="#selectAllUsers" >selectAllUsers</a>
                            </li>
                            <li>
                                <a href="#transaction" >transaction</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#calculateStakes" >calculateStakes</a>
                            </li>
                            <li>
                                <a href="#cancel" >cancel</a>
                            </li>
                            <li>
                                <a href="#ionViewWillEnter" >ionViewWillEnter</a>
                            </li>
                            <li>
                                <a href="#nextPage" >nextPage</a>
                            </li>
                            <li>
                                <a href="#ngOnInit" >ngOnInit</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#takePicture" >takePicture</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>






    <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="calculateStakes"></a>
                    <span class="name">
                        <span ><b>calculateStakes</b></span>
                        <a href="#calculateStakes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>calculateStakes()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="90"
                            class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:90</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function to calculate stakes for all participants.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cancel"></a>
                    <span class="name">
                        <span ><b>cancel</b></span>
                        <a href="#cancel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>cancel()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="159"
                            class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:159</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function to cancel transaction creation and navigate to last page.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ionViewWillEnter"></a>
                    <span class="name">
                        <span ><b>ionViewWillEnter</b></span>
                        <a href="#ionViewWillEnter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ionViewWillEnter()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="42"
                            class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:42</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="nextPage"></a>
                    <span class="name">
                        <span ><b>nextPage</b></span>
                        <a href="#nextPage"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>nextPage()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="107"
                            class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:107</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function to save the current data locally and navigate to the next creation page or finish the transaction creation. Checks for errors of inputs.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnInit"></a>
                    <span class="name">
                        <span ><b>ngOnInit</b></span>
                        <a href="#ngOnInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnInit()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="176"
                            class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:176</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="takePicture"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>takePicture</b></span>
                        <a href="#takePicture"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>takePicture()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="166"
                            class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:166</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function to attach a picture to the transaction.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="currentDate"></a>
                    <span class="name">
                        <span ><b>currentDate</b></span>
                        <a href="#currentDate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Date().toISOString()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="33" class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:33</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="currentUser"></a>
                    <span class="name">
                        <span ><b>currentUser</b></span>
                        <a href="#currentUser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../classes/User.html" target="_self" >User</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:40</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="errors"></a>
                    <span class="name">
                        <span ><b>errors</b></span>
                        <a href="#errors"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Map&lt;string | string&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Map&lt;string, string&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="37" class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:37</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fairlyDistributedPrice"></a>
                    <span class="name">
                        <span ><b>fairlyDistributedPrice</b></span>
                        <a href="#fairlyDistributedPrice"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>true</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:31</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fromGroup"></a>
                    <span class="name">
                        <span ><b>fromGroup</b></span>
                        <a href="#fromGroup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="39" class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:39</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="groups"></a>
                    <span class="name">
                        <span ><b>groups</b></span>
                        <a href="#groups"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../classes/Group.html" target="_self" >Group[]</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:27</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="maxDate"></a>
                    <span class="name">
                        <span ><b>maxDate</b></span>
                        <a href="#maxDate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Date().getFullYear() + 3</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="35" class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:35</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectAllUsers"></a>
                    <span class="name">
                        <span ><b>selectAllUsers</b></span>
                        <a href="#selectAllUsers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>true</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="29" class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:29</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="transaction"></a>
                    <span class="name">
                        <span ><b>transaction</b></span>
                        <a href="#transaction"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../classes/Transaction.html" target="_self" >Transaction</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="25" class="link-to-prism">src/app/transaction/transaction-create/transaction-create.page.ts:25</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

</div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {Component, OnInit} from &#x27;@angular/core&#x27;;
import {Group} from &quot;../../models/group.model&quot;;
import {ActivatedRoute, Router} from &quot;@angular/router&quot;;
import {NavController} from &quot;@ionic/angular&quot;;
import {Transaction} from &quot;../../models/transaction.model&quot;;
import {TransactionService} from &quot;../../services/transaction.service&quot;;
import {GroupService} from &quot;../../services/group.service&quot;;
import {AuthService} from &quot;../../services/auth.service&quot;;
import {Camera, CameraResultType} from &quot;@capacitor/camera&quot;;
import {TransactionTracker} from &quot;../../models/transactionTracker.model&quot;;
import {AngularFireAuth} from &quot;@angular/fire/auth&quot;;
import {User} from &quot;../../models/user.model&quot;;
import {UserService} from &quot;../../services/user.service&quot;;

@Component({
  selector: &#x27;app-transaction-create&#x27;,
  templateUrl: &#x27;./transaction-create.page.html&#x27;,
  styleUrls: [&#x27;./transaction-create.page.scss&#x27;],
})
/**
 * Class representing the logic for the transaction create view.
 */
export class TransactionCreatePage implements OnInit {
  //The transaction that is going to be saved or passed later on.
  transaction: Transaction;
  //The groups of the current user.
  groups: Group[] &#x3D; [];
  //Boolean to check whether the participants are picked individually or all at once.
  selectAllUsers: boolean &#x3D; true;
  //Boolean to check whether everyone pays the same or stakes are decided indiviudally.
  fairlyDistributedPrice: boolean &#x3D; true;
  //String for the current date to prevent past dates in date pickers
  currentDate: string &#x3D; new Date().toISOString();
  //Calculation of max date; 3 years from now.
  maxDate &#x3D; new Date().getFullYear() + 3;
  //Map for saving occuring errors and corresponding messages.
  errors: Map&lt;string, string&gt; &#x3D; new Map&lt;string, string&gt;();
  //Boolean to mark whether the user came via group menu or not
  fromGroup: boolean &#x3D; false;
  currentUser: User;

  ionViewWillEnter(){
    if (this.route.snapshot.paramMap.get(&#x27;fromGroup&#x27;)) {
      this.fromGroup &#x3D; true;
      this.groupService.getGroupById(this.route.snapshot.paramMap.get(&#x27;groupID&#x27;)).then(group &#x3D;&gt; {this.transaction.group &#x3D; group});
    }
  }

  /**
   * @ignore
   * @param router
   * @param navCtrl
   * @param route
   * @param transactionService
   * @param groupService
   * @param userService
   * @param af
   * @param authService
   */
  constructor(private router: Router,
              private navCtrl: NavController,
              private route: ActivatedRoute,
              private transactionService: TransactionService,
              private groupService: GroupService,
              private userService: UserService,
              private af: AngularFireAuth,
              private authService : AuthService) {

      this.transaction &#x3D; new Transaction(&quot;&quot;, null, &quot;&quot;, &quot;cost&quot;, &quot;once&quot;, authService.currentUser, new Date().toDateString(), new Date(new Date().getTime() + 7 * 24 * 60 * 60 * 1000).toDateString());
      this.transaction.paid &#x3D; [];
      this.transaction.accepted &#x3D; [];
      this.transaction.participation &#x3D; [];

    const sub &#x3D; this.af.authState.subscribe(user &#x3D;&gt; {
      if (user) {
        this.userService.findById(user.uid).then(result &#x3D;&gt; {
          this.currentUser &#x3D; result;
          this.groupService.getGroupsByUserId(this.currentUser.id).then(groups &#x3D;&gt; {
            this.groups &#x3D; groups;
          });
          sub.unsubscribe();
        });
      }
    });
  }

  /**
   * Function to calculate stakes for all participants.
   */
  calculateStakes() {
    let stake: number &#x3D; this.transaction.amount / this.transaction.group.members.length;
    for (let user of this.transaction.group.members) {
      let stakeEntry &#x3D; {user, stake};
      let paid &#x3D; user.id &#x3D;&#x3D;&#x3D; this.transaction.creator.id;
      let accepted &#x3D; user.id &#x3D;&#x3D;&#x3D; this.transaction.creator.id;
      let paidEntry &#x3D; {user, paid};
      let acceptedEntry &#x3D; {user, accepted};
      this.transaction.participation.push(stakeEntry);
      this.transaction.accepted.push(acceptedEntry);
      this.transaction.paid.push(paidEntry);
    }
  }

  /**
   * Function to save the current data locally and navigate to the next creation page or finish the transaction creation. Checks for errors of inputs.
   */
  nextPage(): void {
    this.errors.clear();
    if (!this.transaction.purpose){
      this.errors.set(&#x27;purpose&#x27;, &#x27;Bitte geben Sie einen Zweck an.&#x27;);
    }
    if (!this.transaction.amount){
      this.errors.set(&#x27;amount&#x27;, &#x27;Bitte geben Sie einen Betrag an.&#x27;);
    }
    if(this.transaction.amount &lt; 0){
      this.errors.set(&#x27;amount&#x27;, &#x27;Betrag darf nicht negativ sein.&#x27;);
    }
    if (!this.transaction.group){
      this.errors.set(&#x27;group&#x27;, &#x27;Bitte wählen Sie eine Gruppe aus.&#x27;);
    }
    if (this.errors.size &#x3D;&#x3D;&#x3D; 0){
      if (!this.transaction.photo) this.transaction.photo &#x3D; null;

      if (this.selectAllUsers &amp;&amp; this.fairlyDistributedPrice) {
        this.calculateStakes();
          this.transactionService.persist(this.transaction).then(docRef &#x3D;&gt; {
            if (this.transaction.rhythm !&#x3D;&#x3D; &#x27;once&#x27;) {
              this.transactionService.getTransactionById(docRef.id).then((doc: any) &#x3D;&gt; {
                let transaction: Transaction &#x3D; doc;
                let tracker &#x3D; new TransactionTracker(transaction,
                  transaction.creator,
                  new Date(transaction.dueDate),
                  new Date(new Date(this.transaction.dueDate).getTime() + this.transactionService.getRhythmMiliseconds(this.transaction.rhythm)),
                  new Date(this.transaction.dueDate),
                  this.transactionService.getRhythmMiliseconds(this.transaction.rhythm));
                this.transactionService.persistTracker(tracker);
              });
            }
          });
        this.navCtrl.pop();
        return;
      }
      if (!this.selectAllUsers) {
        this.transactionService.saveLocally(this.transaction);
        this.router.navigate([&#x27;transaction-participants&#x27;, {&#x27;fairlyDistributedPrice&#x27;: JSON.stringify(this.fairlyDistributedPrice)}]);
        return;
      }
      if (!this.fairlyDistributedPrice) {
        this.transactionService.saveLocally(this.transaction);
        this.router.navigate([&#x27;transaction-stakes&#x27;]);
        return;
      }
    }
  }

  /**
   * Function to cancel transaction creation and navigate to last page.
   */
  cancel(): void {
    this.navCtrl.pop();
  }

  /**
   * Function to attach a picture to the transaction.
   */
  async takePicture() {
    await Camera.getPhoto({
        quality: 90,
        allowEditing: false,
        resultType: CameraResultType.Base64
      }).then(data &#x3D;&gt; {
        this.transaction.photo &#x3D; &quot;data:image/jpeg;base64, &quot; + data.base64String;
      });
  }

  ngOnInit() {
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-templateData">
        <pre class="line-numbers"><code class="language-html">&lt;ion-header&gt;
  &lt;ion-toolbar&gt;
    &lt;ion-title&gt;Neue Transaktion&lt;/ion-title&gt;
  &lt;/ion-toolbar&gt;
&lt;/ion-header&gt;

&lt;ion-content&gt;
  &lt;ion-select *ngIf&#x3D;&quot;!fromGroup &amp;&amp; groups.length !&#x3D;&#x3D; 0&quot; [(ngModel)]&#x3D;&quot;transaction.group&quot; placeholder&#x3D;&quot;Gruppe auswählen&quot; class&#x3D;&quot;ion-text-center&quot;&gt;
    &lt;ion-select-option *ngFor&#x3D;&quot;let groupChoice of groups&quot;
                       [value]&#x3D;&quot;groupChoice&quot;&gt;{{groupChoice.name}}&lt;/ion-select-option&gt;
  &lt;/ion-select&gt;
  &lt;div *ngIf&#x3D;&quot;groups.length &#x3D;&#x3D;&#x3D; 0&quot; class&#x3D;&quot;center&quot;&gt;
    &lt;ion-text&gt;Keine Gruppe gefunden.&lt;/ion-text&gt;
  &lt;/div&gt;
  &lt;ion-item *ngIf&#x3D;&quot;fromGroup &amp;&amp; transaction.group&quot; class&#x3D;&quot;ion-text-center&quot;&gt;
    &lt;ion-label&gt;{{transaction.group.name}}&lt;/ion-label&gt;
  &lt;/ion-item&gt;
  &lt;ion-text color&#x3D;&quot;danger&quot; *ngIf&#x3D;&quot;errors.get(&#x27;group&#x27;)&quot;&gt;{{errors.get(&#x27;group&#x27;)}}&lt;/ion-text&gt;
  &lt;ion-select [(ngModel)]&#x3D;&quot;transaction.type&quot; class&#x3D;&quot;ion-text-center&quot;&gt;
    &lt;ion-select-option value&#x3D;&quot;income&quot;&gt;Einnahme&lt;/ion-select-option&gt;
    &lt;ion-select-option value&#x3D;&quot;cost&quot;&gt;Ausgabe&lt;/ion-select-option&gt;
  &lt;/ion-select&gt;
  &lt;ion-item&gt;
    &lt;ion-label&gt;Zweck&lt;/ion-label&gt;
    &lt;ion-input [(ngModel)]&#x3D;&quot;transaction.purpose&quot; class&#x3D;&quot;ion-text-right&quot;&gt;&lt;/ion-input&gt;
  &lt;/ion-item&gt;
  &lt;ion-text color&#x3D;&quot;danger&quot; *ngIf&#x3D;&quot;errors.get(&#x27;purpose&#x27;)&quot;&gt;{{errors.get(&#x27;purpose&#x27;)}}&lt;/ion-text&gt;
  &lt;ion-item&gt;
    &lt;ion-label&gt;Betrag&lt;/ion-label&gt;
    &lt;ion-input type&#x3D;&quot;number&quot; clearOnEdit&#x3D;&quot;true&quot; placeholder&#x3D;&quot;0&quot; [(ngModel)]&#x3D;&quot;transaction.amount&quot; class&#x3D;&quot;ion-text-right&quot; min&#x3D;&quot;0&quot;&gt;&lt;/ion-input&gt;
    &lt;ion-text&gt;€&lt;/ion-text&gt;
  &lt;/ion-item&gt;
  &lt;ion-text color&#x3D;&quot;danger&quot; *ngIf&#x3D;&quot;errors.get(&#x27;amount&#x27;)&quot;&gt;{{errors.get(&#x27;amount&#x27;)}}&lt;/ion-text&gt;
  &lt;ion-item&gt;
    &lt;ion-label&gt;Rechnungsdatum&lt;/ion-label&gt;
    &lt;ion-datetime [(ngModel)]&#x3D;&quot;transaction.purchaseDate&quot; displayFormat&#x3D;&quot;DD.MM.YYYY&quot; max&#x3D;&quot;{{maxDate}}&quot;&gt;&lt;/ion-datetime&gt;
  &lt;/ion-item&gt;
  &lt;ion-item&gt;
    &lt;ion-label&gt;Fälligkeitsdatum&lt;/ion-label&gt;
    &lt;ion-datetime [(ngModel)]&#x3D;&quot;transaction.dueDate&quot; displayFormat&#x3D;&quot;DD.MM.YYYY&quot; min&#x3D;&quot;{{currentDate}}&quot; max&#x3D;&quot;{{maxDate}}&quot;&gt;&lt;/ion-datetime&gt;
  &lt;/ion-item&gt;
  &lt;ion-item&gt;
    &lt;ion-label&gt;Rhythmus&lt;/ion-label&gt;
    &lt;ion-select [(ngModel)]&#x3D;&quot;transaction.rhythm&quot;&gt;
      &lt;ion-select-option value&#x3D;&quot;once&quot;&gt;Einmalig&lt;/ion-select-option&gt;
      &lt;ion-select-option value&#x3D;&quot;daily&quot;&gt;Täglich&lt;/ion-select-option&gt;
      &lt;ion-select-option value&#x3D;&quot;weekly&quot;&gt;Wöchentlich&lt;/ion-select-option&gt;
      &lt;ion-select-option value&#x3D;&quot;monthly&quot;&gt;Monatlich&lt;/ion-select-option&gt;
      &lt;ion-select-option value&#x3D;&quot;yearly&quot;&gt;Jährlich&lt;/ion-select-option&gt;
    &lt;/ion-select&gt;
  &lt;/ion-item&gt;
  &lt;ion-item&gt;
    &lt;ion-label&gt;Alle auswählen&lt;/ion-label&gt;
    &lt;ion-toggle [(ngModel)]&#x3D;&quot;selectAllUsers&quot;&gt;&lt;/ion-toggle&gt;
  &lt;/ion-item&gt;
  &lt;ion-item&gt;
    &lt;ion-label&gt;Fair aufteilen&lt;/ion-label&gt;
    &lt;ion-toggle [(ngModel)]&#x3D;&quot;fairlyDistributedPrice&quot;&gt;&lt;/ion-toggle&gt;
  &lt;/ion-item&gt;
  &lt;div class&#x3D;&quot;center&quot;&gt;
    &lt;h6&gt;Beleg&lt;/h6&gt;
    &lt;ion-img *ngIf&#x3D;&quot;transaction.photo&quot; src&#x3D;&quot;{{transaction.photo}}&quot;&gt;&lt;/ion-img&gt;
    &lt;ion-button *ngIf&#x3D;&quot;!transaction.photo&quot; (click)&#x3D;&quot;takePicture()&quot;&gt;
      &lt;ion-icon name&#x3D;&quot;add&quot;&gt;&lt;/ion-icon&gt;
    &lt;/ion-button&gt;
    &lt;ion-button  *ngIf&#x3D;&quot;transaction.photo&quot; (click)&#x3D;&quot;transaction.photo &#x3D; null&quot;&gt;
      &lt;ion-icon name&#x3D;&quot;trash&quot;&gt;&lt;/ion-icon&gt;
    &lt;/ion-button&gt;
  &lt;/div&gt;
  &lt;ion-fab horizontal&#x3D;&quot;end&quot; vertical&#x3D;&quot;bottom&quot; slot&#x3D;&quot;fixed&quot;&gt;
  &lt;ion-fab-button (click)&#x3D;&quot;nextPage()&quot;&gt;
    &lt;ion-icon *ngIf&#x3D;&quot;fairlyDistributedPrice &amp;&amp; selectAllUsers&quot; name&#x3D;&quot;checkmark&quot;&gt;&lt;/ion-icon&gt;
    &lt;ion-icon *ngIf&#x3D;&quot;!selectAllUsers || !fairlyDistributedPrice&quot; name&#x3D;&quot;arrow-forward&quot;&gt;&lt;/ion-icon&gt;
  &lt;/ion-fab-button&gt;
  &lt;/ion-fab&gt;
  &lt;ion-fab horizontal&#x3D;&quot;start&quot; vertical&#x3D;&quot;bottom&quot; slot&#x3D;&quot;fixed&quot;&gt;
  &lt;ion-fab-button (click)&#x3D;&quot;cancel()&quot;&gt;
    &lt;ion-icon name&#x3D;&quot;close&quot;&gt;&lt;/ion-icon&gt;
  &lt;/ion-fab-button&gt;
  &lt;/ion-fab&gt;
&lt;/ion-content&gt;

&lt;ion-footer&gt;
  &lt;ion-toolbar&gt;
    &lt;ion-tabs&gt;
      &lt;ion-tab-bar&gt;
        &lt;ion-tab-button (click)&#x3D;&quot;router.navigate([&#x27;home&#x27;])&quot;&gt;
          &lt;ion-icon name&#x3D;&quot;home-outline&quot;&gt;&lt;/ion-icon&gt;
        &lt;/ion-tab-button&gt;
        &lt;ion-tab-button&gt;
          &lt;ion-icon name&#x3D;&quot;cash-outline&quot;&gt;&lt;/ion-icon&gt;
        &lt;/ion-tab-button&gt;
        &lt;ion-tab-button (click)&#x3D;&quot;router.navigate([&#x27;group-list&#x27;])&quot;&gt;
          &lt;ion-icon name&#x3D;&quot;people-outline&quot;&gt;&lt;/ion-icon&gt;
        &lt;/ion-tab-button&gt;
        &lt;ion-tab-button (click)&#x3D;&quot;router.navigate([&#x27;profile&#x27;])&quot;&gt;
          &lt;ion-icon name&#x3D;&quot;person-outline&quot;&gt;&lt;/ion-icon&gt;
        &lt;/ion-tab-button&gt;
      &lt;/ion-tab-bar&gt;
    &lt;/ion-tabs&gt;
  &lt;/ion-toolbar&gt;
&lt;/ion-footer&gt;
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-styleData">
                <p class="comment">
                    <code>./transaction-create.page.scss</code>
                </p>
                <pre class="line-numbers"><code class="language-scss">.center {
  text-align: center;
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><ion-header>  <ion-toolbar>    <ion-title>Neue Transaktion</ion-title>  </ion-toolbar></ion-header><ion-content>  <ion-select *ngIf="!fromGroup && groups.length !== 0" [(ngModel)]="transaction.group" placeholder="Gruppe auswählen" class="ion-text-center">    <ion-select-option *ngFor="let groupChoice of groups"                       [value]="groupChoice">{{groupChoice.name}}</ion-select-option>  </ion-select>  <div *ngIf="groups.length === 0" class="center">    <ion-text>Keine Gruppe gefunden.</ion-text>  </div>  <ion-item *ngIf="fromGroup && transaction.group" class="ion-text-center">    <ion-label>{{transaction.group.name}}</ion-label>  </ion-item>  <ion-text color="danger" *ngIf="errors.get(\'group\')">{{errors.get(\'group\')}}</ion-text>  <ion-select [(ngModel)]="transaction.type" class="ion-text-center">    <ion-select-option value="income">Einnahme</ion-select-option>    <ion-select-option value="cost">Ausgabe</ion-select-option>  </ion-select>  <ion-item>    <ion-label>Zweck</ion-label>    <ion-input [(ngModel)]="transaction.purpose" class="ion-text-right"></ion-input>  </ion-item>  <ion-text color="danger" *ngIf="errors.get(\'purpose\')">{{errors.get(\'purpose\')}}</ion-text>  <ion-item>    <ion-label>Betrag</ion-label>    <ion-input type="number" clearOnEdit="true" placeholder="0" [(ngModel)]="transaction.amount" class="ion-text-right" min="0"></ion-input>    <ion-text>€</ion-text>  </ion-item>  <ion-text color="danger" *ngIf="errors.get(\'amount\')">{{errors.get(\'amount\')}}</ion-text>  <ion-item>    <ion-label>Rechnungsdatum</ion-label>    <ion-datetime [(ngModel)]="transaction.purchaseDate" displayFormat="DD.MM.YYYY" max="{{maxDate}}"></ion-datetime>  </ion-item>  <ion-item>    <ion-label>Fälligkeitsdatum</ion-label>    <ion-datetime [(ngModel)]="transaction.dueDate" displayFormat="DD.MM.YYYY" min="{{currentDate}}" max="{{maxDate}}"></ion-datetime>  </ion-item>  <ion-item>    <ion-label>Rhythmus</ion-label>    <ion-select [(ngModel)]="transaction.rhythm">      <ion-select-option value="once">Einmalig</ion-select-option>      <ion-select-option value="daily">Täglich</ion-select-option>      <ion-select-option value="weekly">Wöchentlich</ion-select-option>      <ion-select-option value="monthly">Monatlich</ion-select-option>      <ion-select-option value="yearly">Jährlich</ion-select-option>    </ion-select>  </ion-item>  <ion-item>    <ion-label>Alle auswählen</ion-label>    <ion-toggle [(ngModel)]="selectAllUsers"></ion-toggle>  </ion-item>  <ion-item>    <ion-label>Fair aufteilen</ion-label>    <ion-toggle [(ngModel)]="fairlyDistributedPrice"></ion-toggle>  </ion-item>  <div class="center">    <h6>Beleg</h6>    <ion-img *ngIf="transaction.photo" src="{{transaction.photo}}"></ion-img>    <ion-button *ngIf="!transaction.photo" (click)="takePicture()">      <ion-icon name="add"></ion-icon>    </ion-button>    <ion-button  *ngIf="transaction.photo" (click)="transaction.photo = null">      <ion-icon name="trash"></ion-icon>    </ion-button>  </div>  <ion-fab horizontal="end" vertical="bottom" slot="fixed">  <ion-fab-button (click)="nextPage()">    <ion-icon *ngIf="fairlyDistributedPrice && selectAllUsers" name="checkmark"></ion-icon>    <ion-icon *ngIf="!selectAllUsers || !fairlyDistributedPrice" name="arrow-forward"></ion-icon>  </ion-fab-button>  </ion-fab>  <ion-fab horizontal="start" vertical="bottom" slot="fixed">  <ion-fab-button (click)="cancel()">    <ion-icon name="close"></ion-icon>  </ion-fab-button>  </ion-fab></ion-content><ion-footer>  <ion-toolbar>    <ion-tabs>      <ion-tab-bar>        <ion-tab-button (click)="router.navigate([\'home\'])">          <ion-icon name="home-outline"></ion-icon>        </ion-tab-button>        <ion-tab-button>          <ion-icon name="cash-outline"></ion-icon>        </ion-tab-button>        <ion-tab-button (click)="router.navigate([\'group-list\'])">          <ion-icon name="people-outline"></ion-icon>        </ion-tab-button>        <ion-tab-button (click)="router.navigate([\'profile\'])">          <ion-icon name="person-outline"></ion-icon>        </ion-tab-button>      </ion-tab-bar>    </ion-tabs>  </ion-toolbar></ion-footer></div>'
    var COMPONENTS = [{'name': 'AddMembersPage', 'selector': 'app-add-members'},{'name': 'AppComponent', 'selector': 'app-root'},{'name': 'ChangePasswordPage', 'selector': 'app-change-password'},{'name': 'FriendProfilePage', 'selector': 'app-friend-profile'},{'name': 'FriendsPage', 'selector': 'app-friends'},{'name': 'GroupCreatePage', 'selector': 'app-group-create'},{'name': 'GroupDetailsPage', 'selector': 'app-group-details'},{'name': 'GroupListPage', 'selector': 'app-group-list'},{'name': 'HomePage', 'selector': 'app-home'},{'name': 'InvitePage', 'selector': 'app-invite'},{'name': 'LoginPage', 'selector': 'app-login'},{'name': 'MemberViewPage', 'selector': 'app-member-view'},{'name': 'OptionsPage', 'selector': 'app-options'},{'name': 'PasswordPage', 'selector': 'app-password'},{'name': 'PaymentPage', 'selector': 'app-payment'},{'name': 'PaymentReminderPage', 'selector': 'app-payment-reminder'},{'name': 'PrivacyPage', 'selector': 'app-privacy'},{'name': 'ProfilePage', 'selector': 'app-profile'},{'name': 'RegisterPage', 'selector': 'app-register'},{'name': 'StatisticsPage', 'selector': 'app-statistics'},{'name': 'TransactionCreatePage', 'selector': 'app-transaction-create'},{'name': 'TransactionDetailsPage', 'selector': 'app-transaction-details'},{'name': 'TransactionParticipantsPage', 'selector': 'app-transaction-participants'},{'name': 'TransactionStakesPage', 'selector': 'app-transaction-stakes'},{'name': 'TutorialPage', 'selector': 'app-tutorial'}];
    var DIRECTIVES = [];
    var ACTUAL_COMPONENT = {'name': 'TransactionCreatePage'};
</script>
<script src="../js/tree.js"></script>










                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'TransactionCreatePage.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       
       <script type="module" src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
